{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _defineProperty from \"/home/jetson-cam/Face-Recognition-Jetson-Nano-main/jetson_site/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/home/jetson-cam/Face-Recognition-Jetson-Nano-main/jetson_site/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/jetson-cam/Face-Recognition-Jetson-Nano-main/jetson_site/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Avatar, Dialog, IconButton, InputBase, LinearProgress, List, ListItem, ListItemAvatar, ListItemSecondaryAction, ListItemText, TextField, Typography } from \"@material-ui/core\";\nimport { Add } from '@material-ui/icons';\nimport useSWR, { mutate } from 'swr';\nimport { useRouter } from 'next/router';\n\nvar fetcher = function fetcher(url) {\n  return fetch(url).then(function (res) {\n    return res.json();\n  }).then(function (json) {\n    return json.data;\n  });\n};\n\nvar contentType = 'application/json';\n\nvar UndefinedUserList = function UndefinedUserList() {\n  var _useSWR = useSWR('/api/images', fetcher, {\n    refreshInterval: 1000\n  }),\n      images = _useSWR.data,\n      error = _useSWR.error;\n\n  if (!images) return /*#__PURE__*/_jsx(LinearProgress, {\n    color: \"secondary\"\n  });\n  var groups = images.reduce(function (group, key, index) {\n    return (index % 2 == 0 ? group.push([key]) : group[group.length - 1].push(key)) && group;\n  }, []);\n  return /*#__PURE__*/_jsx(List, {\n    children: groups.length > 0 ? groups.map(function (group, i) {\n      return /*#__PURE__*/_jsx(ListItem, {\n        button: true,\n        children: /*#__PURE__*/_jsx(InnerListItem, {\n          group: group\n        })\n      }, i);\n    }) : /*#__PURE__*/_jsx(Typography, {\n      variant: \"caption\",\n      display: \"block\",\n      align: \"center\",\n      children: \"No undefined users found\"\n    })\n  });\n};\n\nvar InnerListItem = function InnerListItem(_ref) {\n  var group = _ref.group;\n\n  var _useState = useState(''),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useState2 = useState({\n    open: false,\n    src: ''\n  }),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var router = useRouter();\n\n  var handleInputChange = function handleInputChange(e) {\n    setName(e.target.value);\n  };\n\n  var handleCreateUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('/api/users', {\n                method: 'POST',\n                headers: {\n                  Accept: contentType,\n                  'Content-Type': contentType\n                },\n                body: JSON.stringify({\n                  name: name || \"User - \".concat(Math.floor(Math.random() * 100000)),\n                  images: [group[0]._id, group[1]._id]\n                })\n              });\n\n            case 2:\n              mutate('/api/images');\n              router.push('/dashboard');\n              setName('');\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleCreateUser() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [group.sort(function (x) {\n      return x.croped ? 0 : x ? -1 : 1;\n    }).map(function (image) {\n      return /*#__PURE__*/_jsx(ListItemAvatar, {\n        onClick: function onClick(e) {\n          return e.target.src && setOpen({\n            open: true,\n            src: e.target.src\n          });\n        },\n        children: /*#__PURE__*/_jsx(Avatar, {\n          src: image.url\n        })\n      }, image._id);\n    }), /*#__PURE__*/_jsx(InputBase, {\n      style: {\n        width: 400\n      },\n      placeholder: \"Undefined User\",\n      value: name,\n      onChange: handleInputChange\n    }), /*#__PURE__*/_jsx(ListItemText, {\n      primary: new Date(group[0].date).toLocaleString()\n    }), /*#__PURE__*/_jsx(ListItemSecondaryAction, {\n      children: /*#__PURE__*/_jsx(IconButton, {\n        onClick: handleCreateUser,\n        children: /*#__PURE__*/_jsx(Add, {})\n      })\n    }), /*#__PURE__*/_jsx(Dialog, {\n      open: open.open,\n      onClose: function onClose() {\n        return setOpen(function (state) {\n          return _objectSpread(_objectSpread({}, state), {}, {\n            open: false\n          });\n        });\n      },\n      children: /*#__PURE__*/_jsx(\"img\", {\n        src: open.src\n      })\n    })]\n  });\n};\n\nexport default UndefinedUserList;","map":null,"metadata":{},"sourceType":"module"}