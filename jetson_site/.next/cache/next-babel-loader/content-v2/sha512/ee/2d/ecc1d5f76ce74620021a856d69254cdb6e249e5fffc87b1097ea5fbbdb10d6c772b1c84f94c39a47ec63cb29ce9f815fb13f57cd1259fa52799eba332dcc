{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _defineProperty from \"/home/jetson-cam/Face-Recognition-Jetson-Nano-main/jetson_site/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/home/jetson-cam/Face-Recognition-Jetson-Nano-main/jetson_site/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/jetson-cam/Face-Recognition-Jetson-Nano-main/jetson_site/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport { Avatar, Collapse, Dialog, IconButton, InputBase, List, ListItem, ListItemAvatar, ListItemIcon, ListItemSecondaryAction, ListItemText } from \"@material-ui/core\";\nimport { ExpandLess, ExpandMore, Add, Delete, Edit, Save } from '@material-ui/icons';\nimport { mutate } from 'swr';\nimport { useRouter } from 'next/router';\nvar contentType = 'application/json';\n\nvar RecognizedItem = function RecognizedItem(_ref) {\n  var user = _ref.user;\n\n  var _useState = useState(false),\n      modal = _useState[0],\n      setModal = _useState[1];\n\n  var _useState2 = useState({\n    open: false,\n    src: ''\n  }),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      edit = _useState3[0],\n      setEdit = _useState3[1];\n\n  var _useState4 = useState(user.name),\n      name = _useState4[0],\n      setName = _useState4[1];\n\n  var router = useRouter();\n\n  var handleClick = function handleClick() {\n    setModal(!modal);\n  };\n\n  var handleDeleteUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('/api/users', {\n                method: 'DELETE',\n                headers: {\n                  Accept: contentType,\n                  'Content-Type': contentType\n                },\n                body: JSON.stringify({\n                  _id: user._id\n                })\n              });\n\n            case 2:\n              mutate('/api/users');\n              router.push('/dashboard');\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleDeleteUser() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleEdit = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setEdit(!edit);\n\n              if (!edit) {\n                _context2.next = 4;\n                break;\n              }\n\n              _context2.next = 4;\n              return fetch('/api/users', {\n                method: 'PUT',\n                headers: {\n                  Accept: contentType,\n                  'Content-Type': contentType\n                },\n                body: JSON.stringify({\n                  name: name,\n                  id: user._id\n                })\n              });\n\n            case 4:\n              mutate('/api/users');\n              router.push('/dashboard');\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleEdit() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleInputChange = function handleInputChange(e) {\n    setName(e.target.value);\n  };\n\n  var avatar = user.images.find(function (image) {\n    return !image.croped;\n  });\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(ListItem, {\n      button: true,\n      children: [/*#__PURE__*/_jsx(ListItemIcon, {\n        children: /*#__PURE__*/_jsx(IconButton, {\n          edge: \"end\",\n          onClick: handleEdit,\n          children: edit ? /*#__PURE__*/_jsx(Save, {}) : /*#__PURE__*/_jsx(Edit, {})\n        })\n      }), /*#__PURE__*/_jsx(ListItemAvatar, {\n        onClick: function onClick(e) {\n          return e.target.src && setOpen({\n            open: true,\n            src: e.target.src\n          });\n        },\n        children: /*#__PURE__*/_jsx(Avatar, {\n          src: avatar.url\n        })\n      }, avatar._id), edit ? /*#__PURE__*/_jsx(InputBase, {\n        fullWidth: true,\n        value: name,\n        onChange: handleInputChange\n      }) : /*#__PURE__*/_jsx(ListItemText, {\n        primary: user.name\n      }), /*#__PURE__*/_jsx(ListItemIcon, {\n        onClick: handleClick,\n        children: modal ? /*#__PURE__*/_jsx(ExpandLess, {}) : /*#__PURE__*/_jsx(ExpandMore, {})\n      }), /*#__PURE__*/_jsx(ListItemSecondaryAction, {\n        children: /*#__PURE__*/_jsx(IconButton, {\n          onClick: handleDeleteUser,\n          children: /*#__PURE__*/_jsx(Delete, {})\n        })\n      })]\n    }), /*#__PURE__*/_jsx(Collapse, {\n      \"in\": modal,\n      timeout: \"auto\",\n      unmountOnExit: true,\n      children: /*#__PURE__*/_jsxs(List, {\n        component: \"div\",\n        disablePadding: true,\n        children: [/*#__PURE__*/_jsx(ListItem, {\n          button: true,\n          children: user.images.map(function (image) {\n            return image.croped && /*#__PURE__*/_jsx(ListItemAvatar, {\n              onClick: function onClick(e) {\n                return e.target.src && setOpen({\n                  open: true,\n                  src: e.target.src\n                });\n              },\n              children: /*#__PURE__*/_jsx(Avatar, {\n                src: image.url\n              })\n            }, image._id);\n          })\n        }), /*#__PURE__*/_jsx(ListItemSecondaryAction, {\n          children: /*#__PURE__*/_jsx(IconButton, {\n            edge: \"end\",\n            children: /*#__PURE__*/_jsx(Add, {})\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(Dialog, {\n      open: open.open,\n      onClose: function onClose() {\n        return setOpen(function (state) {\n          return _objectSpread(_objectSpread({}, state), {}, {\n            open: false\n          });\n        });\n      },\n      children: /*#__PURE__*/_jsx(\"img\", {\n        src: open.src\n      })\n    })]\n  });\n};\n\nexport default RecognizedItem;","map":null,"metadata":{},"sourceType":"module"}